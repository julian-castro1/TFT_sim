function e(e,t){e.clearRect(0,0,t.width,t.height),e.fillStyle=t.backgroundColor,e.fillRect(0,0,t.width,t.height);[...t.elements].sort((e,t)=>e.zIndex-t.zIndex).forEach(t=>{t.visible&&function(e,t){e.save();try{switch(t.type){case"rectangle":!function(e,t){t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fillRect(t.x,t.y,t.width||0,t.height||0));t.color&&t.color!==t.backgroundColor&&(e.strokeStyle=t.color,e.strokeRect(t.x,t.y,t.width||0,t.height||0))}(e,t);break;case"roundedRectangle":!function(e,t){const o=t.radius||5,l=t.width||0,i=t.height||0;e.beginPath(),e.moveTo(t.x+o,t.y),e.lineTo(t.x+l-o,t.y),e.quadraticCurveTo(t.x+l,t.y,t.x+l,t.y+o),e.lineTo(t.x+l,t.y+i-o),e.quadraticCurveTo(t.x+l,t.y+i,t.x+l-o,t.y+i),e.lineTo(t.x+o,t.y+i),e.quadraticCurveTo(t.x,t.y+i,t.x,t.y+i-o),e.lineTo(t.x,t.y+o),e.quadraticCurveTo(t.x,t.y,t.x+o,t.y),e.closePath(),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fill());t.color&&t.color!==t.backgroundColor&&(e.strokeStyle=t.color,e.stroke())}(e,t);break;case"circle":!function(e,t){const o=t.radius||Math.min(t.width||0,t.height||0)/2,l=t.x+o,i=t.y+o;e.beginPath(),e.arc(l,i,o,0,2*Math.PI),t.backgroundColor&&(e.fillStyle=t.backgroundColor,e.fill());t.color&&t.color!==t.backgroundColor&&(e.strokeStyle=t.color,e.stroke())}(e,t);break;case"text":!function(e,t){if(!t.text)return;const o=t.fontSize||16,l=t.font||"Arial, sans-serif";e.font=`${o}px ${l}`,t.color&&(e.fillStyle=t.color);e.textAlign=function(e){switch(e){case"left":return"left";case"center":default:return"center";case"right":return"right"}}(t.textAlign),e.textBaseline=function(e){switch(e){case"top":return"top";case"middle":default:return"middle";case"bottom":return"bottom"}}(t.textBaseline),e.fillText(t.text,t.x,t.y)}(e,t);break;case"bitmap":!function(e,t){e.fillStyle=t.color||"#cccccc",e.fillRect(t.x,t.y,t.width||32,t.height||32),e.fillStyle="#666666",e.font="12px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("IMG",t.x+(t.width||32)/2,t.y+(t.height||32)/2)}(e,t)}}catch(o){}e.restore()}(e,t)}),t.debugMode&&function(e,t){t.forEach((t,o)=>{if(!t.visible)return;e.save(),e.strokeStyle=t.debugColor||`hsl(${60*o%360}, 70%, 50%)`,e.fillStyle=t.debugColor?t.debugColor+"20":`hsla(${60*o%360}, 70%, 50%, 0.1)`,e.lineWidth=2,e.setLineDash([5,5]),e.fillRect(t.x,t.y,t.width,t.height),e.strokeRect(t.x,t.y,t.width,t.height),e.setLineDash([]),e.fillStyle="rgba(0, 0, 0, 0.8)",e.font="10px monospace",e.textAlign="center",e.textBaseline="middle";const l=t.x+t.width/2,i=t.y+t.height/2,r=e.measureText(t.action).width+6;e.fillRect(l-r/2,i-8,r,16),e.fillStyle="white",e.fillText(t.action,l,i),e.restore()})}(e,t.touchZones)}export{e as r};
